{"version":3,"file":"utils.js","sourceRoot":"","sources":["../src/utils.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  ImageContentFit,\n  ImageContentPosition,\n  ImageContentPositionObject,\n  ImageContentPositionString,\n  ImageProps,\n  ImageTransition,\n  IntrinsicSize,\n} from './Image.types';\n\nlet loggedResizeModeDeprecationWarning = false;\nlet loggedRepeatDeprecationWarning = false;\nlet loggedFadeDurationDeprecationWarning = false;\n\n/**\n * If the `contentFit` is not provided, it's resolved from the equivalent `resizeMode` prop\n * that we support to provide compatibility with React Native Image.\n */\nexport function resolveContentFit(\n  contentFit?: ImageContentFit,\n  resizeMode?: ImageProps['resizeMode']\n): ImageContentFit {\n  if (contentFit) {\n    return contentFit;\n  }\n  if (resizeMode) {\n    if (!loggedResizeModeDeprecationWarning) {\n      console.log('[expo-image]: Prop \"resizeMode\" is deprecated, use \"contentFit\" instead');\n      loggedResizeModeDeprecationWarning = true;\n    }\n\n    switch (resizeMode) {\n      case 'contain':\n      case 'cover':\n        return resizeMode;\n      case 'stretch':\n        return 'fill';\n      case 'center':\n        return 'scale-down';\n      case 'repeat':\n        if (!loggedRepeatDeprecationWarning) {\n          console.log('[expo-image]: Resize mode \"repeat\" is no longer supported');\n          loggedRepeatDeprecationWarning = true;\n        }\n    }\n  }\n  return 'cover';\n}\n\n/**\n * It resolves a stringified form of the `contentPosition` prop to an object,\n * which is the only form supported in the native code.\n */\nexport function resolveContentPosition(\n  contentPosition?: ImageContentPosition\n): ImageContentPositionObject {\n  if (typeof contentPosition === 'string') {\n    const contentPositionStringMappings: Record<\n      ImageContentPositionString,\n      ImageContentPositionObject\n    > = {\n      center: { top: '50%', left: '50%' },\n      top: { top: 0, left: '50%' },\n      right: { top: '50%', right: 0 },\n      bottom: { bottom: 0, left: '50%' },\n      left: { top: '50%', left: 0 },\n      'top center': { top: 0, left: '50%' },\n      'top right': { top: 0, right: 0 },\n      'top left': { top: 0, left: 0 },\n      'right center': { top: '50%', right: 0 },\n      'right top': { top: 0, right: 0 },\n      'right bottom': { bottom: 0, right: 0 },\n      'bottom center': { bottom: 0, left: '50%' },\n      'bottom right': { bottom: 0, right: 0 },\n      'bottom left': { bottom: 0, left: 0 },\n      'left center': { top: '50%', left: 0 },\n      'left top': { top: 0, left: 0 },\n      'left bottom': { bottom: 0, left: 0 },\n    };\n    const contentPositionObject = contentPositionStringMappings[contentPosition];\n\n    if (!contentPositionObject) {\n      console.warn(`[expo-image]: Content position \"${contentPosition}\" is invalid`);\n      return contentPositionStringMappings.center;\n    }\n    return contentPositionObject;\n  }\n  return contentPosition ?? { top: '50%', left: '50%' };\n}\n\n/**\n * If `transition` or `fadeDuration` is a number, it's resolved to a cross dissolve transition with the given duration.\n * When `fadeDuration` is used, it logs an appropriate deprecation warning.\n */\nexport function resolveTransition(\n  transition?: ImageProps['transition'],\n  fadeDuration?: ImageProps['fadeDuration']\n): ImageTransition | null {\n  if (typeof transition === 'number') {\n    return { duration: transition };\n  }\n  if (!transition && typeof fadeDuration === 'number') {\n    if (!loggedFadeDurationDeprecationWarning) {\n      console.warn('[expo-image]: Prop \"fadeDuration\" is deprecated, use \"transition\" instead');\n      loggedFadeDurationDeprecationWarning = true;\n    }\n    return { duration: fadeDuration };\n  }\n  return transition ?? null;\n}\n\nexport function resolveIntrinsicSize(intrinsicSize: IntrinsicSize | IntrinsicSize[]) {\n  const toFilter = Array.isArray(intrinsicSize) ? intrinsicSize : [intrinsicSize];\n  const filtered = toFilter.filter((size) => {\n    const isValid = (size.width && size.width > 0) || (size.height && size.height > 0);\n    if (!isValid) {\n      console.warn(\n        `[expo-image]: Intrinsic size ${JSON.stringify(size)} is invalid and will be ignored`\n      );\n    }\n    return isValid;\n  });\n  return filtered.length > 0 ? filtered : null;\n}\n"]}